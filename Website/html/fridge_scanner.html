<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Upload Receipt</title>
    <script src='https://cdn.rawgit.com/naptha/tesseract.js/1.0.10/dist/tesseract.js'></script>
    <link rel="stylesheet" type="text/css" href="../css/fridge_scanner.css">
  </head>
  <body>
      <!-- SIDE NAV -->
      <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="#">Home</a>
        <a href="fridgepg3.html">Your Fridge</a> <!-- LINK PAGES -->
        <a href="#">Facts</a>
        <a href="#">About Us</a>
      </div>

      <div id="main">
        <span onclick="openNav()">&#9776; Menu</span>
      <!-- MENU BUTTON FOR SIDE NAV -->

      <!-- HERO HEADER -->
      <div class="hero-image">
        <div class="hero-text">
          <h1><span><i>fridged-it</i></span></h1>
        </div>
      </div>

      <!-- DIV TO UPLOAD PHOTO -->

      <h2><span>Receipt Upload </span></h2>
      <p>We understand that you're always on the go. To make things easier for you, follow these steps: </p>
      <ol>
        <li>Save your receipts.</li>
        <li>Snap a picture of it! We recommend using apps like Evernote Scannable to help get the best results.</li>
        <li>Upload your photo using the "Choose File" button below.</li>
        <li>Return back to your fridge and see your food items!</li>
      </ol>
      <hr />

      <h2>Upload Your Receipt: </h2>
      <img src="../images/evernote-scan.gif" alt="Scannable gif"/>

      <br />

      <!-- <label for="fileInput">Choose Receipt to scan:</label>
      <input type="file" id="fileInput" name="fileInput"/>
      <br />
      <br />
      <div id="document-content">
      </div>
      <div id = "ocr_status"></div> -->


      <label for=fileInput>Choose your receipt:</label>
      <br>
      <br>
      <input type="file" id="fileInput" name="fileInput"/>

      <div id="document-content"></div>
      <div id="ocr_status"></div>
    </div>

    <!-- TESSERACT SCRIPT TO PARSE RECEIPT -->
    <script>
    document.addEventListener('DOMContentLoaded', function(){
          var fileInput = document.getElementById('fileInput');
          fileInput.addEventListener('change', handleInputChange);
      });

      function handleInputChange(event){
          var input = event.target;
          var file = input.files[0];
          console.log(file);
          Tesseract.recognize(file)
              .progress(function(message){
                  document.getElementById("ocr_status")
                          .innerText = message["status"] + " (" +
                              (message["progress"] * 100) + "%)";
              })


              .then(function(result){
                  var contentArea = document.getElementById('document-content')
                  .innerText = result.text;
              })
              .catch(function(err){
                  console.error(err);
              });
      }
    </script>

    <!-- JAVASCRIPT FOR SIDE NAV -->
    <script>
      function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
        document.getElementById("main").style.marginLeft = "250px";
      }

      function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("main").style.marginLeft= "0";
      }
    </script>

  </body>
</html>
