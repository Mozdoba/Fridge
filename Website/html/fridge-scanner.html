<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Tesseract Test</title>
    <meta charset="utf-8">
    <script src='https://cdn.rawgit.com/naptha/tesseract.js/1.0.10/dist/tesseract.js'></script>
    <link rel="stylesheet" href="../css/fridge-scanner.css">
  </head>
  <body>
    <!-- HOVERABLE SIDE NAV -->
    <div id="mySidenav" class="sidenav">
      <a href="#" id="yourFridge">Your Fridge</a>
      <a href="#" id="blog">Blog</a>
    </div>
    <!-- HOVERABLE SIDE NAV -->
    
    <div class="mainContent">
      <h1 class="header"><span>Add items using your receipts</span></h1>
      
      <br>
      <hr>
    
      <div class="steps">
      
        <h3>How to add items using your receipt:</h3>
        <span class="spanSteps">
        <ol>
          <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</li>
          <li>Donec dignissim odio erat. Quisque at consectetur lorem. </li>
          <!-- Add photo of a clearly photographed receipt -->
          <li>Donec a interdum lorem, eu porta massa. Mauris ac scelerisque risus. </li>
          <li>Aliquam molestie ultricies eros, sed ultrices mauris venenatis eget. Nunc dignissim mattis mi. </li>
          <li>Donec tincidunt ex at tellus dignissim vehicula.</li>
        </ol>
        </span>
      </div>
    
      <hr>
    
      <label for=fileInput>Choose your receipt:</label>
      <br>
      <br>
      <input type="file" id="fileInput" name="fileInput"/>

      <div id="document-content"></div>
      <div id="ocr_status"></div>
    </div>
      
<!-- ALAN'S ORIGINAL CODE
        <label for="fileInput">Choose Receipt to scan:</label>
        <input type="file" id="fileInput" name="fileInput"/>
        <br />
        <br />
        <div id="document-content">
        </div>
        <div id = "ocr_status"></div>
-->
    </body>
  
    <!-- TESSERACT SCRIPT TO PARSE RECEIPT --> 
    <script>
      document.addEventListener('DOMContentLoaded', function(){
            var fileInput = document.getElementById('fileInput');
            fileInput.addEventListener('change', handleInputChange);
        });

        function handleInputChange(event){
            var input = event.target;
            var file = input.files[0];
            console.log(file);
            Tesseract.recognize(file)
                .progress(function(message){
                    document.getElementById("ocr_status")
                            .innerText = message["status"] + " (" +
                                (message["progress"] * 100) + "%)";
                })
                .then(function(result){
                    var contentArea = document.getElementById('document-content')
                    .innerText = result.text;
                })
                .catch(function(err){
                    console.error(err);
                });
        }
    </script>
</html>